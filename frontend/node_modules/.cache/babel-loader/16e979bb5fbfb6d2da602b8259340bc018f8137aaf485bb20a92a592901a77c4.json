{"ast":null,"code":"var _jsxFileName = \"/frontend/src/pages/CreateSession.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography, TextField, Button, Paper } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useWebSocket } from \"../context/WebSocketContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateSession = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    connect,\n    socket\n  } = useWebSocket();\n  const navigate = useNavigate();\n  const [documentName, setDocumentName] = useState(\"\");\n  useEffect(() => {\n    if (!socket) return;\n\n    // Clean up event handlers to avoid duplicates\n    socket.off(\"session_created\");\n    socket.off(\"error\");\n    socket.on(\"session_created\", data => {\n      const {\n        document_id\n      } = data;\n      navigate(`/collaborate/${document_id}`);\n    });\n    socket.on(\"error\", error => {\n      console.error(error.message);\n      alert(error.message);\n    });\n    return () => {\n      socket.off(\"session_created\");\n      socket.off(\"error\");\n    };\n  }, [socket, navigate]);\n  const handleCreateSession = async () => {\n    if (!documentName) {\n      alert(\"Document name is required!\");\n      return;\n    }\n    if (!(user !== null && user !== void 0 && user.username)) {\n      alert(\"You must be logged in to create a session!\");\n      return;\n    }\n    try {\n      const connectedSocket = await connect(); // Wait for the socket to connect\n      connectedSocket.emit(\"create_session\", {\n        owner: user.username,\n        document_name: documentName\n      });\n    } catch (error) {\n      console.error(\"Socket connection failed:\", error);\n      alert(\"Socket connection failed! Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      minHeight: \"100vh\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        textAlign: \"center\",\n        padding: \"20px\",\n        backgroundColor: \"#fff\",\n        borderBottom: \"1px solid #ccc\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        style: {\n          fontWeight: \"bold\",\n          color: \"#333\"\n        },\n        children: [\"Create a Collaboration Session\", user !== null && user !== void 0 && user.username ? `, ${user.username}` : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      flexGrow: 1,\n      style: {\n        backgroundColor: \"#f4f4f4\",\n        borderRadius: \"8px\",\n        padding: \"20px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        style: {\n          padding: \"30px\",\n          textAlign: \"center\",\n          width: \"400px\",\n          backgroundColor: \"white\",\n          borderRadius: \"8px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          style: {\n            fontWeight: \"bold\",\n            marginBottom: \"20px\",\n            color: \"#555\"\n          },\n          children: \"Enter a Document Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          fullWidth: true,\n          placeholder: \"Enter document name\",\n          value: documentName,\n          onChange: e => setDocumentName(e.target.value),\n          style: {\n            marginBottom: \"20px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          style: {\n            fontWeight: \"bold\",\n            fontSize: \"16px\",\n            padding: \"10px\"\n          },\n          onClick: handleCreateSession,\n          children: \"Create Session\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      style: {\n        padding: \"20px\",\n        backgroundColor: \"#fff\",\n        borderTop: \"1px solid #ccc\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"text\",\n        color: \"secondary\",\n        style: {\n          fontWeight: \"bold\",\n          fontSize: \"14px\"\n        },\n        onClick: () => navigate(\"/dashboard\"),\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateSession, \"rcTMALDxMM1GcR864Q1oaMYZ688=\", false, function () {\n  return [useAuth, useWebSocket, useNavigate];\n});\n_c = CreateSession;\nexport default CreateSession;\nvar _c;\n$RefreshReg$(_c, \"CreateSession\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","TextField","Button","Paper","useNavigate","useAuth","useWebSocket","jsxDEV","_jsxDEV","CreateSession","_s","user","connect","socket","navigate","documentName","setDocumentName","off","on","data","document_id","error","console","message","alert","handleCreateSession","username","connectedSocket","emit","owner","document_name","style","display","flexDirection","minHeight","children","textAlign","padding","backgroundColor","borderBottom","variant","fontWeight","color","fileName","_jsxFileName","lineNumber","columnNumber","justifyContent","alignItems","flexGrow","borderRadius","elevation","width","marginBottom","fullWidth","placeholder","value","onChange","e","target","fontSize","onClick","borderTop","_c","$RefreshReg$"],"sources":["/frontend/src/pages/CreateSession.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Box, Typography, TextField, Button, Paper } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useWebSocket } from \"../context/WebSocketContext\";\n\nconst CreateSession: React.FC = () => {\n    const { user } = useAuth();\n    const { connect, socket } = useWebSocket();\n    const navigate = useNavigate();\n    const [documentName, setDocumentName] = useState(\"\");\n\n    useEffect(() => {\n        if (!socket) return;\n\n        // Clean up event handlers to avoid duplicates\n        socket.off(\"session_created\");\n        socket.off(\"error\");\n\n        socket.on(\"session_created\", (data) => {\n            const { document_id } = data;\n            navigate(`/collaborate/${document_id}`);\n        });\n\n        socket.on(\"error\", (error) => {\n            console.error(error.message);\n            alert(error.message);\n        });\n\n        return () => {\n            socket.off(\"session_created\");\n            socket.off(\"error\");\n        };\n    }, [socket, navigate]);\n\n    const handleCreateSession = async () => {\n        if (!documentName) {\n            alert(\"Document name is required!\");\n            return;\n        }\n    \n        if (!user?.username) {\n            alert(\"You must be logged in to create a session!\");\n            return;\n        }\n    \n        try {\n            const connectedSocket = await connect(); // Wait for the socket to connect\n            connectedSocket.emit(\"create_session\", { owner: user.username, document_name: documentName });\n        } catch (error) {\n            console.error(\"Socket connection failed:\", error);\n            alert(\"Socket connection failed! Please try again.\");\n        }\n    };\n\n    return (\n        <div style={{ display: \"flex\", flexDirection: \"column\", minHeight: \"100vh\" }}>\n            {/* Header */}\n            <Box\n                style={{\n                    textAlign: \"center\",\n                    padding: \"20px\",\n                    backgroundColor: \"#fff\",\n                    borderBottom: \"1px solid #ccc\",\n                }}\n            >\n                <Typography\n                    variant=\"h5\"\n                    style={{\n                        fontWeight: \"bold\",\n                        color: \"#333\",\n                    }}\n                >\n                    Create a Collaboration Session{user?.username ? `, ${user.username}` : \"\"}\n                </Typography>\n            </Box>\n\n            {/* Content */}\n            <Box\n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                flexGrow={1}\n                style={{ backgroundColor: \"#f4f4f4\", borderRadius: \"8px\", padding: \"20px\" }}\n            >\n                <Paper\n                    elevation={3}\n                    style={{\n                        padding: \"30px\",\n                        textAlign: \"center\",\n                        width: \"400px\",\n                        backgroundColor: \"white\",\n                        borderRadius: \"8px\",\n                    }}\n                >\n                    <Typography\n                        variant=\"h6\"\n                        style={{\n                            fontWeight: \"bold\",\n                            marginBottom: \"20px\",\n                            color: \"#555\",\n                        }}\n                    >\n                        Enter a Document Name\n                    </Typography>\n                    <TextField\n                        variant=\"outlined\"\n                        fullWidth\n                        placeholder=\"Enter document name\"\n                        value={documentName}\n                        onChange={(e) => setDocumentName(e.target.value)}\n                        style={{ marginBottom: \"20px\" }}\n                    />\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        fullWidth\n                        style={{\n                            fontWeight: \"bold\",\n                            fontSize: \"16px\",\n                            padding: \"10px\",\n                        }}\n                        onClick={handleCreateSession}\n                    >\n                        Create Session\n                    </Button>\n                </Paper>\n            </Box>\n\n            {/* Logout Button */}\n            <Box\n                display=\"flex\"\n                justifyContent=\"center\"\n                style={{ padding: \"20px\", backgroundColor: \"#fff\", borderTop: \"1px solid #ccc\" }}\n            >\n                <Button\n                    variant=\"text\"\n                    color=\"secondary\"\n                    style={{\n                        fontWeight: \"bold\",\n                        fontSize: \"14px\",\n                    }}\n                    onClick={() => navigate(\"/dashboard\")}\n                >\n                    Back to Dashboard\n                </Button>\n            </Box>\n        </div>\n    );\n};\n\nexport default CreateSession;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}